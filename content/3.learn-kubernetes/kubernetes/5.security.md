---
title: Security
description: Understanding Kubernetes security concepts, best practices, and implementations
icon: 'lucide:shield'
---

## Kubernetes Security

Kubernetes security is a multi-layered approach that includes cluster security, application security, and network security.

## Authentication & Authorization

::steps
### Authentication Methods
- X.509 Certificates
- Service Accounts
- OpenID Connect
- Webhook Token Auth
- Static Token File

### Role-Based Access Control (RBAC)
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: default
  name: pod-reader
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "watch", "list"]
```

### Role Bindings
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: default
subjects:
- kind: User
  name: jane
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io
```
::

## Pod Security

### Security Context
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: security-context-demo
spec:
  securityContext:
    runAsUser: 1000
    runAsGroup: 3000
    fsGroup: 2000
  containers:
  - name: sec-ctx-demo
    image: busybox
    command: [ "sh", "-c", "sleep 1h" ]
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - ALL
```

## Pod Security Policies (PSP)

::steps
### Basic PSP
```yaml
apiVersion: policy/v1beta1
kind: PodSecurityPolicy
metadata:
  name: restricted
spec:
  privileged: false
  seLinux:
    rule: RunAsAny
  runAsUser:
    rule: MustRunAsNonRoot
  fsGroup:
    rule: RunAsAny
  volumes:
  - 'configMap'
  - 'emptyDir'
  - 'persistentVolumeClaim'
```

### PSP Configuration
- Volume restrictions
- Privilege controls
- User/group controls
- SELinux configuration
- Root privileges
::

## Network Security

::steps
### Network Policies
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: api-allow
spec:
  podSelector:
    matchLabels:
      app: api
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          role: frontend
    ports:
    - protocol: TCP
      port: 8080
```

### TLS Configuration
- Certificate management
- Ingress TLS
- API server security
- etcd encryption
::

## Secrets Management

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: MWYyZDFlMmU2N2Rm
```

## Security Best Practices

::alert{type="warning"}
1. Use namespace isolation
2. Implement RBAC properly
3. Enable audit logging
4. Regular security updates
5. Use network policies
6. Encrypt sensitive data
7. Implement pod security
8. Monitor cluster security
::

## Cluster Hardening

::steps
### Control Plane Security
- API server security
- etcd encryption
- Controller manager
- Scheduler security

### Node Security
- Kubelet configuration
- Container runtime
- Node access control
- System hardening

### Container Security
- Image scanning
- Runtime security
- Resource isolation
- Vulnerability management
::

## Audit Logging

```yaml
apiVersion: audit.k8s.io/v1
kind: Policy
rules:
- level: RequestResponse
  resources:
  - group: ""
    resources: ["pods"]
```

## Compliance and Standards

::alert{type="info"}
Key security standards:
1. CIS Kubernetes Benchmark
2. NIST Guidelines
3. SOC 2 Compliance
4. PCI DSS Requirements
5. HIPAA Compliance
::

## Security Monitoring

::steps
### Tools and Practices
- Security scanners
- Log analysis
- Intrusion detection
- Vulnerability scanning
- Compliance monitoring

### Response Plan
- Incident detection
- Response procedures
- Recovery process
- Documentation
- Team responsibilities
::

## Advanced Security Topics

### Runtime Security
```yaml
apiVersion: security.openshift.io/v1
kind: SecurityContextConstraints
metadata:
  name: restricted
allowPrivilegeEscalation: false
runAsUser:
  type: MustRunAsRange
seLinuxContext:
  type: MustRunAs
```

### Encryption Configuration
```yaml
apiVersion: apiserver.config.k8s.io/v1
kind: EncryptionConfiguration
resources:
  - resources:
    - secrets
    providers:
    - aescbc:
        keys:
        - name: key1
          secret: <base64-encoded-key>
    - identity: {}
```

## Security Checklist

::alert{type="info"}
Essential security measures:
1. RBAC implementation
2. Network policies
3. Pod security
4. Secret management
5. Audit logging
6. TLS configuration
7. Container security
8. Access controls
9. Monitoring setup
10. Incident response
::