---
title: Volumes
description: Learn about Docker volumes, data persistence, and storage management
icon: 'lucide:database'
---

## Docker Volumes

Volumes are the preferred mechanism for persisting data generated and used by Docker containers. They are completely managed by Docker and provide several advantages over bind mounts.

## Types of Storage

::steps
### Volumes
- Managed by Docker
- Stored in `/var/lib/docker/volumes/`
- Best practice for persistent data
- Can be shared across containers
- Easy backup and migration

### Bind Mounts
- Any location on host filesystem
- Less functionality than volumes
- Good for development
- Host-dependent configuration
- Limited portability

### tmpfs Mounts
- Stored in host's memory
- Temporary storage
- Improved performance
- Data lost on container stop
- Useful for sensitive information
::

## Volume Commands

```bash
# Create a volume
docker volume create my-volume

# List volumes
docker volume ls

# Inspect volume
docker volume inspect my-volume

# Remove volume
docker volume rm my-volume

# Remove all unused volumes
docker volume prune
```

## Using Volumes with Containers

::steps
### Basic Volume Mount
```bash
docker run -v my-volume:/app/data nginx
```

### Read-Only Volume
```bash
docker run -v my-volume:/app/data:ro nginx
```

### Named Volume in Docker Compose
```yaml
version: '3.8'
services:
  web:
    image: nginx
    volumes:
      - my-volume:/app/data

volumes:
  my-volume:
```
::

## Volume Use Cases

::alert{type="info"}
1. Database Storage
2. Configuration Files
3. Static Content
4. Shared Data Between Containers
5. Development Source Code
6. Log Storage
::

## Data Backup and Restore

```bash
# Backup volume data
docker run --rm -v my-volume:/source \
  -v $(pwd):/backup alpine tar \
  czf /backup/volume-backup.tar.gz /source

# Restore volume data
docker run --rm -v my-volume:/source \
  -v $(pwd):/backup alpine tar \
  xzf /backup/volume-backup.tar.gz -C /source
```

## Volume Drivers

::steps
### Local Driver
- Default driver
- Stores data on host
- Limited to single host
- Simple and fast

### Third-Party Drivers
- Cloud storage integration
- Network storage support
- Distributed filesystems
- Enhanced functionality
::

## Best Practices

::alert{type="warning"}
1. Use named volumes for better management
2. Regular backup of important data
3. Clean up unused volumes
4. Use volume labels for organization
5. Consider volume plugins for specific needs
6. Document volume usage in projects
::

## Common Volume Patterns

### Data Container Pattern
```bash
# Create data container
docker create -v /dbdata --name dbstore postgres /bin/true

# Use volumes from data container
docker run --volumes-from dbstore postgres
```

### Shared Volume Pattern
```bash
# Multiple containers sharing data
docker run -v shared-data:/shared --name container1 nginx
docker run -v shared-data:/shared --name container2 nginx
```

## Volume Management Tips

::steps
### Monitoring
- Regular volume inspection
- Track space usage
- Monitor performance
- Check mount points

### Maintenance
- Regular cleanup
- Version control for configs
- Backup strategy
- Security updates

### Security
- Proper permissions
- Access control
- Encryption when needed
- Regular audits
::

## Troubleshooting

::alert{type="info"}
1. Check volume mount points
2. Verify permissions
3. Inspect volume metadata
4. Review container logs
5. Check available space
6. Validate volume driver status
::

## Advanced Topics

```bash
# Volume with specific driver options
docker volume create --driver local \
  --opt type=nfs \
  --opt o=addr=192.168.1.1,rw \
  --opt device=:/path/to/dir \
  nfs-volume

# Volume with labels
docker volume create --label project=myapp \
  --label environment=prod \
  labeled-volume
```
