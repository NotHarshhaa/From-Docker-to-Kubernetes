---
title: Security
description: Learn about Docker security best practices, configurations, and tools
icon: 'lucide:shield'
---

## Docker Security

Security is crucial when running containers in production. This guide covers essential security practices and configurations for Docker environments.

## Security Fundamentals

::steps
### Isolation
- Process isolation
- Network namespace separation
- Resource limitations
- Filesystem isolation
- User namespace mapping

### Access Control
- User permissions
- Group management
- Role-based access control (RBAC)
- API access restrictions
- Registry authentication

### Resource Control
- CPU limits
- Memory constraints
- Storage quotas
- Network rate limiting
- Process restrictions
::

## Docker Security Best Practices

### Image Security

```bash
# Scan image for vulnerabilities
docker scan my-image:latest

# Use specific image versions
docker pull nginx:1.21.6-alpine

# Sign and verify images
docker trust sign my-image:latest
docker trust inspect my-image:latest
```

### Container Security

::alert{type="warning"}
1. Never run containers as root
2. Use read-only root filesystem
3. Limit container capabilities
4. Set resource limits
5. Use security options
6. Enable logging and monitoring
::

## Security Configurations

### Secure Container Runtime

```yaml
version: '3.8'
services:
  secure-app:
    image: my-app:latest
    security_opt:
      - no-new-privileges:true
      - seccomp:security-profile.json
    read_only: true
    tmpfs:
      - /tmp
    user: non-root-user
    cap_drop:
      - ALL
    cap_add:
      - NET_BIND_SERVICE
```

### Network Security

::steps
### Network Isolation
- Use custom networks
- Restrict external access
- Enable TLS
- Implement firewalls
- Monitor traffic

### Access Control
- Port binding restrictions
- Service-specific networks
- Network segmentation
- Traffic encryption
- Load balancer security
::

## Docker Daemon Security

```bash
# Configure TLS for Docker daemon
dockerd \
  --tlsverify \
  --tlscacert=ca.pem \
  --tlscert=server-cert.pem \
  --tlskey=server-key.pem \
  -H=0.0.0.0:2376

# Restrict Docker socket access
chmod 660 /var/run/docker.sock
chown root:docker /var/run/docker.sock
```

## Content Trust and Image Signing

::alert{type="info"}
Content trust provides:
1. Image authenticity verification
2. Data integrity protection
3. Publisher verification
4. Supply chain security
5. Deployment policy enforcement
::

## Security Tools and Scanning

### Common Security Tools

```bash
# Trivy scanner
trivy image my-image:latest

# Clair scanner
clair-scanner my-image:latest

# Docker Bench Security
docker run -it --net host --pid host --userns host --cap-add audit_control \
    -v /var/lib:/var/lib \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v /usr/lib/systemd:/usr/lib/systemd \
    -v /etc:/etc --label docker_bench_security \
    docker/docker-bench-security
```

## Secrets Management

::steps
### Docker Secrets
- Encrypted at rest
- Secure transmission
- Version controlled
- Access restrictions
- Runtime injection

### Implementation
```bash
# Create a secret
echo "my-secure-password" | docker secret create db_password -

# Use secret in service
docker service create \
  --secret db_password \
  --name secure-app \
  my-app:latest
```
::

## Compliance and Auditing

::alert{type="warning"}
Key compliance areas:
1. Container runtime security
2. Image security policies
3. Network security controls
4. Access control policies
5. Audit logging
6. Vulnerability management
::

## Security Monitoring

### Monitoring Tools and Practices

```bash
# Enable Docker logging
dockerd \
  --log-driver json-file \
  --log-opt max-size=10m \
  --log-opt max-file=3

# Monitor container events
docker events --filter 'type=container'

# Check container resource usage
docker stats
```

## Incident Response

::steps
### Detection
- Monitor logs
- Track resource usage
- Alert on anomalies
- Security scanning
- Behavioral analysis

### Response
- Container isolation
- Evidence collection
- Root cause analysis
- System hardening
- Policy updates
::

## Advanced Security Topics

### AppArmor Profiles

```yaml
version: '3.8'
services:
  app:
    security_opt:
      - apparmor:custom-profile
```

### SELinux Policies

```bash
# Run container with SELinux context
docker run --security-opt label=level:s0:c100,c200 my-app
```

### Seccomp Profiles

```json
{
  "defaultAction": "SCMP_ACT_ERRNO",
  "architectures": ["SCMP_ARCH_X86_64"],
  "syscalls": [
    {
      "names": ["accept", "bind", "listen"],
      "action": "SCMP_ACT_ALLOW"
    }
  ]
}
```

## Security Checklist

::alert{type="info"}
Essential security measures:
1. Regular security updates
2. Minimal base images
3. Proper access controls
4. Network segmentation
5. Resource limitations
6. Security scanning
7. Audit logging
8. Secrets management
9. Compliance monitoring
10. Incident response plan
::